# 技术栈与依赖

<cite>
**本文档引用的文件**
- [pom.xml](file://pom.xml)
- [application.properties](file://src/main/resources/application.properties)
- [NewBeeMallApplication.java](file://src/main/java/ltd/newbee/mall/NewBeeMallApplication.java)
- [NeeBeeMallWebMvcConfigurer.java](file://src/main/java/ltd/newbee/mall/config/NeeBeeMallWebMvcConfigurer.java)
- [NewBeeMallGoodsMapper.java](file://src/main/java/ltd/newbee/mall/dao/NewBeeMallGoodsMapper.java)
- [NewBeeMallGoodsMapper.xml](file://src/main/resources/mapper/NewBeeMallGoodsMapper.xml)
- [NewBeeMallGoodsServiceImpl.java](file://src/main/java/ltd/newbee/mall/service/impl/NewBeeMallGoodsServiceImpl.java)
- [login.html](file://src/main/resources/templates/admin/login.html)
- [index.html](file://src/main/resources/templates/mall/index.html)
- [jquery.min.js](file://src/main/resources/static/admin/plugins/jquery/jquery.min.js)
- [bootstrap.bundle.min.js](file://src/main/resources/static/admin/plugins/bootstrap/js/bootstrap.bundle.min.js)
- [adminlte.min.css](file://src/main/resources/static/admin/dist/css/adminlte.min.css)
</cite>

## 目录
1. [技术栈概览](#技术栈概览)
2. [核心框架：Spring Boot 2.7.5](#核心框架spring-boot-275)
3. [数据持久层：MyBatis ORM](#数据持久层mybatis-orm)
4. [视图层：Thymeleaf模板引擎](#视图层thymeleaf模板引擎)
5. [持久化存储：MySQL](#持久化存储mysql)
6. [前端依赖](#前端依赖)
7. [关键依赖版本与用途](#关键依赖版本与用途)
8. [运行时参数配置](#运行时参数配置)
9. [技术选型合理性分析与升级指导](#技术选型合理性分析与升级指导)

## 技术栈概览

newbee-mall项目是一个基于Spring Boot技术栈的电商系统，其技术架构清晰，选型合理。项目以前后端不分离的模式开发，后端采用Spring Boot作为核心框架，MyBatis作为ORM框架，Thymeleaf作为模板引擎，MySQL作为数据库。前端则依赖于jQuery、Bootstrap和AdminLTE等成熟的前端库来构建交互式和美观的用户界面。这种技术组合为开发者提供了一个稳定、高效且易于上手的开发环境。

## 核心框架：Spring Boot 2.7.5

Spring Boot 2.7.5是newbee-mall项目的核心框架，它极大地简化了基于Spring的应用程序的初始搭建和开发过程。项目通过继承`spring-boot-starter-parent`来管理所有Spring Boot相关依赖的版本，确保了依赖的一致性。

```xml
<parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>2.7.5</version>
    <relativePath/> <!-- lookup parent from repository -->
</parent>
```

项目入口类`NewBeeMallApplication`使用了`@SpringBootApplication`注解，这是一个组合注解，它包含了`@Configuration`、`@EnableAutoConfiguration`和`@ComponentScan`，实现了自动配置、组件扫描和配置类的功能。这使得开发者无需编写繁琐的XML配置，即可快速启动一个功能完备的Web应用。

```java
@SpringBootApplication
public class NewBeeMallApplication {
    public static void main(String[] args) {
        SpringApplication.run(NewBeeMallApplication.class, args);
    }
}
```

此外，项目还使用了`@MapperScan`注解来指定MyBatis Mapper接口所在的包，从而让Spring容器能够自动扫描并注册这些接口。

**Section sources**
- [pom.xml](file://pom.xml#L16-L21)
- [NewBeeMallApplication.java](file://src/main/java/ltd/newbee/mall/NewBeeMallApplication.java#L22-L27)

## 数据持久层：MyBatis ORM

MyBatis在newbee-mall项目中扮演着对象关系映射（ORM）的角色，它将Java对象与数据库中的记录进行映射，简化了数据库操作。项目通过`mybatis-spring-boot-starter`依赖来集成MyBatis。

```xml
<dependency>
    <groupId>org.mybatis.spring.boot</groupId>
    <artifactId>mybatis-spring-boot-starter</artifactId>
    <version>${mybatis.start.version}</version>
</dependency>
```

MyBatis的配置在`application.properties`文件中指定，通过`mybatis.mapper-locations`属性定义了Mapper XML文件的路径。

```properties
mybatis.mapper-locations=classpath:mapper/*Mapper.xml
```

项目的DAO层（Data Access Object）由接口和XML文件组成。例如，`NewBeeMallGoodsMapper`接口定义了对商品数据的增删改查方法，而`NewBeeMallGoodsMapper.xml`文件则包含了这些方法对应的SQL语句。这种分离的方式使得SQL语句与Java代码解耦，便于维护和调试。

```java
public interface NewBeeMallGoodsMapper {
    int insertSelective(NewBeeMallGoods record);
    List<NewBeeMallGoods> findNewBeeMallGoodsList(PageQueryUtil pageUtil);
    // ... 其他方法
}
```

```xml
<select id="findNewBeeMallGoodsList" parameterType="Map" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from tb_newbee_mall_goods_info
    <where>
        <if test="goodsName!=null and goodsName!=''">
            and goods_name like CONCAT('%','#{goodsName}','%')
        </if>
        <!-- ... 其他条件 -->
    </where>
    order by goods_id desc
    <if test="start!=null and limit!=null">
        limit #{start},#{limit}
    </if>
</select>
```

在Service层，通过`@Autowired`注入Mapper接口，即可直接调用其方法来操作数据库。

```java
@Service
public class NewBeeMallGoodsServiceImpl implements NewBeeMallGoodsService {
    @Autowired
    private NewBeeMallGoodsMapper goodsMapper;

    @Override
    public PageResult getNewBeeMallGoodsPage(PageQueryUtil pageUtil) {
        List<NewBeeMallGoods> goodsList = goodsMapper.findNewBeeMallGoodsList(pageUtil);
        int total = goodsMapper.getTotalNewBeeMallGoods(pageUtil);
        return new PageResult(goodsList, total, pageUtil.getLimit(), pageUtil.getPage());
    }
    // ... 其他实现
}
```

**Section sources**
- [pom.xml](file://pom.xml#L44-L48)
- [application.properties](file://src/main/resources/application.properties#L21-L22)
- [NewBeeMallGoodsMapper.java](file://src/main/java/ltd/newbee/mall/dao/NewBeeMallGoodsMapper.java#L18-L53)
- [NewBeeMallGoodsMapper.xml](file://src/main/resources/mapper/NewBeeMallGoodsMapper.xml#L3-L391)
- [NewBeeMallGoodsServiceImpl.java](file://src/main/java/ltd/newbee/mall/service/impl/NewBeeMallGoodsServiceImpl.java#L35-L46)

## 视图层：Thymeleaf模板引擎

Thymeleaf是newbee-mall项目中用于视图渲染的模板引擎。它允许在HTML文件中嵌入动态内容，实现前后端的数据绑定。项目通过`spring-boot-starter-thymeleaf`依赖来集成Thymeleaf。

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-thymeleaf</artifactId>
</dependency>
```

在`application.properties`中，`spring.thymeleaf.cache=false`配置项禁用了模板缓存，这在开发阶段非常有用，可以确保修改后的HTML页面能立即生效，无需重启服务器。

```properties
spring.thymeleaf.cache=false
```

Thymeleaf模板文件位于`src/main/resources/templates`目录下。例如，`index.html`是商城的首页模板，它使用`th:replace`来引入头部和尾部的公共模板，使用`th:each`来遍历商品分类和轮播图数据，使用`th:text`和`th:href`来动态设置文本内容和链接地址。

```html
<nav th:replace="mall/header::nav-fragment"></nav>
<div class="all-sort-list">
    <th:block th:each="category : ${categories}">
        <div class="item">
            <h3><span>·</span><a href="##"><th:block th:text="${category.categoryName}"></th:block></a></h3>
            <!-- ... -->
        </div>
    </th:block>
</div>
<a th:href="@{'/goods/detail/'+${hotGoodse.goodsId}}">
    <img th:src="@{${hotGoodse.goodsCoverImg}}" th:alt="${hotGoodse.goodsName}">
</a>
```

Controller层通过`Model`对象将数据传递给Thymeleaf模板。

```java
@Controller
public class IndexController {
    @GetMapping({"/", "/index", "/index.html"})
    public String index(Model model, HttpServletRequest request) {
        List<GoodsCategoryVO> categories = goodsCategoryService.getCategoriesForIndex();
        model.addAttribute("categories", categories);
        // ... 添加其他数据
        return "mall/index";
    }
}
```

**Section sources**
- [pom.xml](file://pom.xml#L32-L35)
- [application.properties](file://src/main/resources/application.properties#L7-L7)
- [index.html](file://src/main/resources/templates/mall/index.html#L1-L353)

## 持久化存储：MySQL

MySQL是newbee-mall项目选择的持久化存储数据库。它是一个成熟、稳定且广泛使用的开源关系型数据库管理系统。项目通过`mysql-connector-java`驱动来连接MySQL数据库。

```xml
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <scope>runtime</scope>
</dependency>
```

数据库的连接信息在`application.properties`文件中配置，包括URL、用户名、密码以及连接池（HikariCP）的相关参数。项目使用了HikariCP作为默认的连接池，它以高性能和轻量级著称。

```properties
spring.datasource.url=jdbc:mysql://localhost:3306/newbee_mall_db?useUnicode=true&serverTimezone=Asia/Shanghai&characterEncoding=utf8&autoReconnect=true&useSSL=false&allowMultiQueries=true
spring.datasource.username=root
spring.datasource.password=123456
spring.datasource.hikari.maximum-pool-size=15
# ... 其他配置
```

`newbee_mall_schema.sql`文件包含了数据库的表结构定义，如商品表、订单表、用户表等，为项目提供了数据存储的基础。

**Section sources**
- [pom.xml](file://pom.xml#L56-L60)
- [application.properties](file://src/main/resources/application.properties#L8-L19)
- [newbee_mall_schema.sql](file://src/main/resources/newbee_mall_schema.sql)

## 前端依赖

newbee-mall项目的前端依赖主要由jQuery、Bootstrap和AdminLTE构成，它们共同支撑了页面的交互与UI展示。

- **jQuery**: 作为JavaScript库，jQuery极大地简化了HTML文档遍历、事件处理、动画和Ajax交互。在`login.html`等页面中，通过`<script th:src="@{/admin/plugins/jquery/jquery.min.js}"></script>`引入，并用于处理表单提交、验证码刷新等交互逻辑。
- **Bootstrap**: 作为一个前端框架，Bootstrap提供了响应式布局、预定义的CSS样式和JavaScript组件（如模态框、轮播图、下拉菜单等）。项目引入了Bootstrap 4，为页面提供了现代化的UI基础和强大的组件支持。
- **AdminLTE**: 这是一个基于Bootstrap的后台管理模板，它提供了丰富的UI组件和页面布局，使得开发者可以快速构建出功能齐全、界面美观的后台管理系统。`adminlte.min.css`和`adminlte.js`是其核心文件。

```html
<!-- login.html 中的前端依赖引入 -->
<script th:src="@{/admin/plugins/jquery/jquery.min.js}"></script>
<script th:src="@{/admin/plugins/bootstrap/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/admin/dist/js/plugins/particles.js}"></script>
<script th:src="@{/admin/dist/js/plugins/login-bg-particles.js}"></script>
```

**Section sources**
- [login.html](file://src/main/resources/templates/admin/login.html#L84-L90)
- [jquery.min.js](file://src/main/resources/static/admin/plugins/jquery/jquery.min.js)
- [bootstrap.bundle.min.js](file://src/main/resources/static/admin/plugins/bootstrap/js/bootstrap.bundle.min.js)
- [adminlte.min.css](file://src/main/resources/static/admin/dist/css/adminlte.min.css)

## 关键依赖版本与用途

`pom.xml`文件是项目依赖管理的核心，它列出了所有关键依赖及其版本。以下是主要依赖的版本和用途说明：

| 依赖名称 | 版本 | 用途 |
| :--- | :--- | :--- |
| spring-boot-starter-parent | 2.7.5 | Spring Boot 父级依赖，管理所有Spring Boot相关依赖的版本 |
| spring-boot-starter-web | 2.7.5 | 提供Web开发支持，包含Spring MVC和嵌入式Tomcat |
| spring-boot-starter-thymeleaf | 2.7.5 | 集成Thymeleaf模板引擎，用于服务器端页面渲染 |
| mybatis-spring-boot-starter | 2.2.2 | 集成MyBatis ORM框架，简化数据库操作 |
| mysql-connector-java | 8.0.30 (由父POM管理) | MySQL数据库的JDBC驱动 |
| hutool-captcha | 5.8.7 | 提供验证码生成功能 |

**Section sources**
- [pom.xml](file://pom.xml#L1-L83)

## 运行时参数配置

`application.properties`文件包含了应用运行时的关键参数配置，这些配置直接影响应用的行为。

| 配置项 | 值 | 说明 |
| :--- | :--- | :--- |
| server.port | 28089 | 应用启动的端口号 |
| spring.thymeleaf.cache | false | 是否启用Thymeleaf模板缓存，开发环境设为false便于调试 |
| spring.datasource.url | jdbc:mysql://... | 数据库连接URL，包含时区、字符集等重要参数 |
| spring.datasource.username | root | 数据库用户名 |
| spring.datasource.password | 123456 | 数据库密码 |
| spring.datasource.hikari.maximum-pool-size | 15 | 数据库连接池最大连接数 |
| mybatis.mapper-locations | classpath:mapper/*Mapper.xml | MyBatis Mapper XML文件的路径 |

**Section sources**
- [application.properties](file://src/main/resources/application.properties#L1-L22)

## 技术选型合理性分析与升级指导

newbee-mall项目的技术选型具有高度的合理性和实用性：

1.  **稳定性与成熟度**: Spring Boot、MyBatis、Thymeleaf、MySQL、jQuery、Bootstrap等技术都是经过市场长期验证的成熟方案，拥有庞大的社区和丰富的文档，降低了项目风险。
2.  **开发效率**: Spring Boot的自动配置和起步依赖极大地提升了开发效率；Thymeleaf的HTML模板方式对前端开发者友好；MyBatis的SQL与代码分离便于维护。
3.  **学习曲线**: 该技术栈是Java Web开发的经典组合，学习资源丰富，非常适合新手开发者入门和学习。

**升级指导**:
- **Spring Boot**: 可以考虑升级到最新的稳定版本（如3.x系列），以获得更好的性能、安全性和新特性。但需注意版本间的兼容性问题，特别是从2.x升级到3.x可能涉及较大的改动。
- **前端**: 可以将jQuery和Bootstrap的组合升级为现代的前端框架，如Vue.js或React，实现前后端分离，提升用户体验和开发效率。项目本身也提供了Vue3版本作为参考。
- **数据库**: 可以考虑引入Redis作为缓存层，减轻数据库压力，提升系统性能。

**Section sources**
- [README.md](file://README.md#L7-L207)